
add_namespace = spain

# Spanish Civil War from Focus
country_event = {
	id = spain.10
	title = spain.1.t
	desc = spain.10.d
	picture = GFX_report_event_spain_civil_war_soldiers


		is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_named_threat = {threat = 3.5 name = SPR_war }
				
			SPR = {
				add_timed_idea = { idea = SPR_ongoing_civil_war days = 988 }
			}

			remove_ideas = SPR_military_disloyalty
			remove_ideas = SPR_political_violence
			
			SPR_clr_national_strikes = yes

			add_stability = -0.10
			
			news_event = { hours = 6 id = news.63 }
			news_event = { days = 988 id = news.64 }
			country_event = { id = spain.78 days = 5 } 
			set_politics = { ruling_party = neutrality }
			create_country_leader = {
						name = "José Sanjurjo"
						desc = "POLITICS_JOSE_SANJURJO_DESC"
						picture = "GFX_portrait_SPA_jose_sanjurjo"
						expire = "1965.1.1"
						ideology = despotism
						traits = {
							the_lion_of_the_rif
						}
			}
			ITA = { country_event = { id = ethiopia.1 days = 1 } }

			SOV = {
				add_timed_idea = {
					idea = SPA_civil_war_support days = 988 
				}

			}
			GER = {
				add_timed_idea = {
					idea = SPA_civil_war_support days = 988 
				}
			}
			ITA = {
				add_timed_idea = {
					idea = SPA_civil_war_support days = 988 
				}
			}
		}
	}
	option = { # Support Nationalists
		name = spain.1.a
	}

}
	#Alcaza-Zamora Resigns
	country_event = {
	id = spain.90
	title = spain.90.t
	desc = spain.90.desc
	picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { # Ok
		name = spain.90.a
		if = {
			limit = {
				has_dlc = "La Resistance"
			}
			if = {
				limit = {
					has_completed_focus = SPR_the_popular_front
				}
				
				add_political_power = 10
			}
			retire_country_leader = yes
			create_country_leader = {
				name = "Manuel Azaña"
				desc = "POLITICS_MANUEL_AZANA_DESC"
				picture = "Portrait_Spain_Manuel_Azana.dds"
				expire = "1965.1.1"
				ideology = conservatism
				traits = {
					figurehead_president
				}
			}
		}
		else = {
			retire_country_leader = yes
			create_country_leader = {
				name = "Manuel Azaña"
				desc = "POLITICS_MANUEL_AZANA_DESC"
				picture = "Portrait_Spain_Manuel_Azana.dds"
				expire = "1965.1.1"
				ideology = conservatism
				traits = {
		
				}
			}
		}
	}
}

#unused end of civil war event
country_event = {
	id = spain.1000
	title = spain.1000.t
	desc = spain.1000.desc
	picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { # Ok
		name = spain.1000.a
		add_ideas = SPA_recovering_from_civil_war
		
	}
}

# Spain - Sanjurjo Dies
country_event = {
	id = spain.78
	title = spain.78.t
	desc = spain.78.desc
	picture = GFX_report_event_spr_plane_crash
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			create_country_leader = {
				name = "Military Junta"
				desc = "POLITICS_MILITARY_JUNTA_DESC"
				picture = "GFX_portrait_SPA_military_junta"
				expire = "1965.1.1"
				ideology = despotism
				traits = {
					divided_interests
				}
			}
		}
	}
	
	option = { # RIP
		name = spain.78.a
		effect_tooltip = {
			custom_effect_tooltip = spain.78_tt
			hidden_effect = {
				kill_country_leader = yes
			}
			create_country_leader = {
				name = "Military Junta"
				desc = "POLITICS_MILITARY_JUNTA_DESC"
				picture = "GFX_portrait_SPA_military_junta"
				expire = "1965.1.1"
				ideology = despotism
				traits = {
					divided_interests
				}
			}
		}
	}
}

#Event to peace out Spain against the WAllies

country_event = {
	id = spain.99
	title = spain.99.t
	desc = spain.99.desc
	picture = GFX_report_event_spr_plane_crash
	
	mean_time_to_happen = {
		hours = 1
	}
	
	trigger = {
		tag = SPR
		has_offensive_war_with = ENG
	}
	
	immediate = {
		hidden_effect = {
			every_enemy_country = {
					limit = {
						NOT = { tag = SOV }
						NOT = { tag = MON }
					}
					white_peace = SPR
				}
		}
	}
	
	option = { # I'm sorry I won't do it again
		name = spain.99.a
		add_stability = -0.1
		news_event = { hours = 6 id = DSFU_news.4 }
	}
}
